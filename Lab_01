import java.io.*;
import java.util.*;

public class Lab_01 {
    public static void main(String[] args) {
        NewFile("цікаве програмування займає дуже багато часу, але воно того варте, бо дуже цікаве");

        System.out.println(CommonWords("S1L1.txt"));
    }

    public static String CommonWords(String filename) {
        Map<String, Integer> quantity = new HashMap<>();
        String common = null;
        try (BufferedReader br = new BufferedReader(new FileReader(filename))) {

            String str;
            while ((str = br.readLine()) != null) {
                // Делим строки на слова
                for (String e : str.split(" ")) {
                    // проверка есть ли итерируеммое слово в коллекции, если нет, то добавляем его и присваиваем значение 1
                    if (!quantity.containsKey(e)) {
                        quantity.put(e, 0);
                    } else {
                        // если условие, что слова нет в коллекции не выполнилось, то добавляем это же слово со значением +1
                        quantity.put(e, quantity.get(e) + 1);
                    }
                }
            }
            int max = 0;
            // value - кол-во повторений слов; ищем максимальное кол-во повторений
            for (int value : quantity.values()) {
                if (value > max) {
                    max = value;
                }
            }
            for (Map.Entry<String, Integer> entry : quantity.entrySet()) {
                if (entry.getValue() == max) {
                    common = entry.getKey();
                }
            }
        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
        return common;
    }

    public static void NewFile(String text) {
        try {
            //создаем файл с текстом
            FileWriter fw = new FileWriter("S1L1.txt", false);
            fw.write(text);
            fw.flush();
            fw.close();
        } catch (IOException ex) {
            System.out.println(ex.getMessage());
        }
    }
}
